os.getcwd D:\_devs\Python01\gitdev\dsa2
D:\_devs\Python01\gitdev\dsa2
D:/_devs/Python01/gitdev/dsa2/
D:/_devs/Python01/gitdev/dsa2/data/
D:\_devs\Python01\gitdev\dsa2
D:/_devs/Python01/gitdev/dsa2/
D:/_devs/Python01/gitdev/dsa2/data/
D:/_devs/Python01/gitdev/dsa2/
os.getcwd D:\_devs\Python01\gitdev\dsa2
D:/_devs/Python01/gitdev/dsa2/

  ('#### Model Params Dynamic loading  ###############################################',) 

  ('D:\\_devs\\Python01\\gitdev',) 
D:\_devs\Python01\gitdev\dsa2
D:/_devs/Python01/gitdev/dsa2/
D:/_devs/Python01/gitdev/dsa2/data/

  ({'model_pars': {'model_path': '', 'config_model_name': 'LGBMClassifier', 'model_pars': {'objective': 'binary', 'learning_rate': 0.03, 'boosting_type': 'gbdt'}, 'post_process_fun': <function titanic_lightgbm.<locals>.post_process_fun at 0x000002A72ABA3510>, 'pre_process_pars': {'y_norm_fun': None, 'pipe_list': ['filter', 'label', 'dfnum_bin', 'dfnum_hot', 'dfcat_bin', 'dfcat_hot', 'dfcross_hot']}}, 'compute_pars': {'metric_list': ['accuracy_score', 'average_precision_score']}, 'data_pars': {'cols_input_type': {'coly': 'Survived', 'colid': 'PassengerId', 'colcat': ['Sex', 'Embarked'], 'colnum': ['Pclass', 'Age', 'SibSp', 'Parch', 'Fare'], 'coltext': ['Name', 'Ticket'], 'coldate': [], 'colcross': ['Name', 'Sex', 'Ticket', 'Embarked', 'Pclass', 'Age', 'SibSp', 'Parch', 'Fare']}, '\n            \'colid\',\n            "colnum", "colnum_bin", "colnum_onehot", "colnum_binmap",  #### Colnum columns                        \n            "colcat", "colcat_bin", "colcat_onehot", "colcat_bin_map",  #### colcat columns                        \n            \'colcross_single_onehot_select\', "colcross_pair_onehot",  \'colcross_pair\',  #### colcross columns            \n            \'coldate\',\n            \'coltext\',            \n            "coly"\n          cols_model_group': ['colnum', 'colcat_bin'], 'filter_pars': {'ymax': 2, 'ymin': -1}}, 'global_pars': {'config_name': 'titanic_lightgbm', 'model_name': 'LGBMClassifier', 'path_config_model': 'D:/_devs/Python01/gitdev/dsa2//titanic_classifier.py', 'path_model': 'data/output/titanic/a01_LGBMClassifier/', 'path_data_train': 'data/input/titanic/train/', 'path_data_test': 'data/input/titanic/test/', 'path_output_pred': '/data/output/titanic/pred_a01_titanic_lightgbm/', 'n_sample': 1000}},) 
  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier/',) 
  ('#### Model Params Dynamic loading  ###############################################',) 

  ('D:\\_devs\\Python01\\gitdev',) 
  ('#### load input column family  ###################################################',) 
  ({'coly': 'Survived', 'colid': 'PassengerId', 'colcat': ['Sex', 'Embarked'], 'colnum': ['Pclass', 'Age', 'SibSp', 'Parch', 'Fare'], 'coltext': ['Name', 'Ticket'], 'coldate': [], 'colcross': ['Name', 'Sex', 'Ticket', 'Embarked', 'Pclass', 'Age', 'SibSp', 'Parch', 'Fare']},) 
  ('#### Preprocess  #################################################################',) 

  ({'coly': 'Survived', 'colid': 'PassengerId', 'colcat': ['Sex', 'Embarked'], 'colnum': ['Pclass', 'Age', 'SibSp', 'Parch', 'Fare'], 'coltext': ['Name', 'Ticket'], 'coldate': [], 'colcross': ['Name', 'Sex', 'Ticket', 'Embarked', 'Pclass', 'Age', 'SibSp', 'Parch', 'Fare']},) 

  (['Pclass', 'Age', 'SibSp', 'Parch', 'Fare', 'Sex', 'Embarked', 'Name', 'Ticket'],) 

  ('loading', 'PassengerId', 'D:/_devs/Python01/gitdev/dsa2/data/input/titanic/train//features.zip') 
['D:/_devs/Python01/gitdev/dsa2/data/input/titanic/train\\features.zip']

  ('y_norm_fun preprocess_pars',) 

  (Pclass      float32
Age         float32
SibSp       float32
Parch       float32
Fare        float32
Sex          object
Embarked     object
Name         object
Ticket       object
dtype: object,) 

  ('### colnum Map numerics to Category bin  ###########################################',) 
Pclass
           Pclass               
              max mean  min size
Pclass_bin                      
0             1.0  1.0  1.0  216
4             2.0  2.0  2.0  184
9             3.0  3.0  3.0  491
Age
               Age                       
               max       mean    min size
Age_bin                                  
0         8.000000   3.355000   0.42   54
1        16.000000  13.467391   9.00   46
2        24.000000  20.778238  17.00  193
3        32.200001  30.183939  24.50  330
4        40.000000  36.177967  32.50  118
5        48.000000  44.400002  40.50   70
6        56.000000  51.944443  49.00   45
7        64.000000  60.291668  57.00   24
8        71.000000  68.166664  65.00    9
9        80.000000  77.000000  74.00    2
SibSp
          SibSp               
            max mean  min size
SibSp_bin                     
0           0.0  0.0  0.0  608
1           1.0  1.0  1.0  209
2           2.0  2.0  2.0   28
3           3.0  3.0  3.0   16
4           4.0  4.0  4.0   18
6           5.0  5.0  5.0    5
9           8.0  8.0  8.0    7
Parch
          Parch               
            max mean  min size
Parch_bin                     
0           0.0  0.0  0.0  678
1           1.0  1.0  1.0  118
3           2.0  2.0  2.0   80
4           3.0  3.0  3.0    5
6           4.0  4.0  4.0    4
8           5.0  5.0  5.0    5
9           6.0  6.0  6.0    1
Fare
                Fare                             
                 max        mean         min size
Fare_bin                                         
0          50.495800   15.595536    0.000000  732
1          93.500000   69.483727   51.479198  106
2         153.462494  128.930237  106.425003   31
3         164.866699  164.866699  164.866699    2
4         247.520798  224.766663  211.337494   11
5         263.000000  262.791656  262.375000    6
9         512.329224  512.329224  512.329224    3

  (OrderedDict([('Pclass', [0.9999, 1.2, 1.4, 1.6, 1.8, 2.0, 2.2, 2.4000000000000004, 2.6, 2.8, 3.0]), ('Age', [0.41989998688697816, 8.378000169992447, 16.336000353097916, 24.294000536203384, 32.25200071930885, 40.21000090241432, 48.16800108551979, 56.12600126862526, 64.08400145173073, 72.0420016348362, 80.00000181794167]), ('SibSp', [-0.0001, 0.8, 1.6, 2.4000000000000004, 3.2, 4.0, 4.800000000000001, 5.6000000000000005, 6.4, 7.2, 8.0]), ('Parch', [-0.0001, 0.6, 1.2, 1.7999999999999998, 2.4, 3.0, 3.5999999999999996, 4.2, 4.8, 5.3999999999999995, 6.0]), ('Fare', [-0.0001, 51.23292236328125, 102.4658447265625, 153.69876708984373, 204.931689453125, 256.16461181640625, 307.39753417968745, 358.6304565429687, 409.86337890625, 461.09630126953124, 512.3292236328125])]),) 

  (['Pclass_bin', 'Age_bin', 'SibSp_bin', 'Parch_bin', 'Fare_bin'],) 

  ('### colnum bin to One Hot',) 
Pclass_bin 3 (891, 5)
Age_bin 10 (891, 7)
SibSp_bin 7 (891, 16)
Parch_bin 7 (891, 22)
Fare_bin 7 (891, 28)

  (['Pclass_bin_0', 'Pclass_bin_4', 'Pclass_bin_9', 'Age_bin_0', 'Age_bin_1', 'Age_bin_2', 'Age_bin_3', 'Age_bin_4', 'Age_bin_5', 'Age_bin_6', 'Age_bin_7', 'Age_bin_8', 'Age_bin_9', 'SibSp_bin_0', 'SibSp_bin_1', 'SibSp_bin_2', 'SibSp_bin_3', 'SibSp_bin_4', 'SibSp_bin_6', 'SibSp_bin_9', 'Parch_bin_0', 'Parch_bin_1', 'Parch_bin_3', 'Parch_bin_4', 'Parch_bin_6', 'Parch_bin_8', 'Parch_bin_9', 'Fare_bin_0', 'Fare_bin_1', 'Fare_bin_2', 'Fare_bin_3', 'Fare_bin_4', 'Fare_bin_5', 'Fare_bin_9'],) 

  (Sex         object
Embarked    object
dtype: object, {'cat_map': {'Sex': {'female': 0, 'male': 1}, 'Embarked': {'C': 0, 'Q': 1, 'S': 2}}, 'cat_map_inverse': {'Sex': {0: 'female', 1: 'male'}, 'Embarked': {0: 'C', 1: 'Q', 2: 'S'}}}) 

  ('#### colcat to onehot',) 
Sex 2 (891, 2)
Embarked 3 (891, 2)

  (             Embarked_C  Embarked_Q  Embarked_S
PassengerId                                    
1                     0           0           1
2                     1           0           0
3                     0           0           1
4                     0           0           1
5                     0           0           1,) 

  ('#### Colcat to integer encoding ',) 

  ('#####  Cross Features From OneHot Features   ######################################',) 

  (PassengerId              1  2
Embarked_C-Pclass_bin_0  0  1
Embarked_C-Pclass_bin_9  0  0
Embarked_C-Age_bin_2     0  0
Embarked_C-Age_bin_3     0  0
Embarked_C-Age_bin_4     0  1
...                     .. ..
Parch_bin_0-Fare_bin_0   1  0
Parch_bin_0-Fare_bin_1   0  1
Parch_bin_1-Fare_bin_0   0  0
Parch_bin_1-Fare_bin_1   0  0
Parch_bin_3-Fare_bin_0   0  0

[117 rows x 2 columns],) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline/',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colid.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colid.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colnum.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colnum.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colnum_bin.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colnum_bin.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colnum_onehot.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colnum_onehot.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colnum_binmap.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colnum_binmap.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcat.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcat.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcat_bin.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcat_bin.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcat_onehot.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcat_onehot.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcat_bin_map.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcat_bin_map.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcross_single_onehot_select.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcross_single_onehot_select.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcross_pair_onehot.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcross_pair_onehot.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcross_pair.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colcross_pair.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//coldate.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//coldate.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//coltext.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//coltext.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//coly.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//coly.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//y_norm_fun.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//colsX.pkl',) 

  ('D:/_devs/Python01/gitdev/dsa2/data/output/titanic/a01_LGBMClassifier//pipeline//cols_family.pkl',) 
Traceback (most recent call last):
  File "titanic_classifier.py", line 325, in <module>
    fire.Fire()
  File "D:\_devs\Python01\ana3\envs\py36\lib\site-packages\fire\core.py", line 138, in Fire
    component_trace = _Fire(component, args, parsed_flag_args, context, name)
  File "D:\_devs\Python01\ana3\envs\py36\lib\site-packages\fire\core.py", line 468, in _Fire
    target=component.__name__)
  File "D:\_devs\Python01\ana3\envs\py36\lib\site-packages\fire\core.py", line 672, in _CallAndUpdateTrace
    component = fn(*varargs, **kwargs)
  File "titanic_classifier.py", line 273, in train
    run.train(config_uri = config_file + '::' + config_name)
  File "D:\_devs\Python01\gitdev\dsa2\run.py", line 100, in train
    n_sample = m['n_sample']
  File "D:\_devs\Python01\gitdev\dsa2\source\run_train.py", line 216, in run_train
    model_dict['data_pars']['cols_model'] = sum([  cols[colgroup] for colgroup in model_dict['data_pars']['cols_model_group'] ]   , [])                
KeyError: 'cols_model_group'
